(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsSAAALEgHS3X78AAAAuElEQVRIiWNgQAP///9nQhcjFeA0Y82aNearVq26CsQq5BoO1GuzevXqK+vXr1fAZvhHIP4PxE/IsQRkOBB/BpkBtOQB3JJt27axQw39j4RJsgTZcCR8hJACoiwhWi85lpCshxQNZPuaGI2UBClBAyg2nIAlr4D4C8WGE7CEOoajWfIVi+HPKTac5hbQNIhoGsk0TaY0zWikaCTZEnJcRbQeSsKVoF66VDg0rTLRLKFNpQ8D1G62AADkTMz5vYARGQAAAABJRU5ErkJggg=="},11:function(e,t,a){e.exports=a(20)},16:function(e,t,a){},18:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(9),r=a.n(o),i=(a(16),a(2)),l=a(3),c=a(5),h=a(4),d=a(6),u=a(1),m=(a(18),a(10)),g=a.n(m);function f(e){if(""!==e.message)var t="ERROR: "+e.message;else t="";return s.a.createElement("p",{className:"error"}," ",t," ")}function v(e){var t={backgroundImage:"url("+e.image+")"};return s.a.createElement("div",{className:"favoriteImageContainer"},s.a.createElement("img",{className:"favoriteImageDelete",src:g.a,onClick:e.onPostClick}),s.a.createElement("a",{className:"imageLink",href:"#"+e.id,style:t}),s.a.createElement("div",{className:"favoriteInfo"},s.a.createElement("a",{className:"favoriteLink",target:"_blank",href:"https://www.reddit.com"+e.link},"/u/",e.author)))}function w(e){var t={backgroundImage:"url("+e.image+")"};return s.a.createElement("div",{className:"postOuterContainer"},s.a.createElement("div",{id:e.id,className:"postBackgroundImage",style:t}," "),s.a.createElement("img",{className:"postImage",src:e.image,onClick:e.onPostClick}))}var p=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).handleOnEnter=e.handleOnEnter.bind(Object(u.a)(Object(u.a)(e))),e.handleFilterTextInputChangeLocal=e.handleFilterTextInputChangeLocal.bind(Object(u.a)(Object(u.a)(e))),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleFilterTextInputChangeLocal",value:function(e){this.props.onFilterTextInput(e.target.value)}},{key:"handleOnEnter",value:function(e){"Enter"===e.key&&this.props.onFilterTextInput(e.target.value)}},{key:"render",value:function(){return s.a.createElement("div",{className:"searchInputContainer"},s.a.createElement("input",{type:"text",placeholder:"sneakers",onKeyPress:this.handleOnEnter,onBlur:this.handleFilterTextInputChangeLocal}))}}]),t}(s.a.Component),k=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).state={small:!1,zoom:100},e.handleZoom=e.handleZoom.bind(Object(u.a)(Object(u.a)(e))),e.handleCheckbox=e.handleCheckbox.bind(Object(u.a)(Object(u.a)(e))),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleZoom",value:function(e){document.styleSheets[0].cssRules[5].style.width=e.target.value+"%",this.state.small||(document.styleSheets[0].cssRules[6].style.height=e.target.value+"vh"),this.setState({zoom:e.target.value})}},{key:"handleCheckbox",value:function(e){e.target.checked?(document.styleSheets[0].cssRules[8].style.height="auto",document.styleSheets[0].cssRules[8].style.width="100%",document.styleSheets[0].cssRules[6].style.height="auto"):(document.styleSheets[0].cssRules[8].style.height="100%",document.styleSheets[0].cssRules[8].style.width="auto",document.styleSheets[0].cssRules[6].style.height=this.state.zoom+"vh"),this.setState({small:e.target.checked})}},{key:"render",value:function(){return s.a.createElement("div",{className:"settingsContainer"},s.a.createElement("div",{style:{float:"right",width:"50%"}},s.a.createElement("h3",null,"Size "),s.a.createElement("input",{type:"range",id:"myRange",value:this.state.zoom,maks:"100",min:"20",step:"1",onChange:this.handleZoom})),s.a.createElement("div",{style:{float:"left",width:"50%"}},s.a.createElement("h3",null," True size "),s.a.createElement("input",{type:"checkbox",checked:this.state.small,onClick:this.handleCheckbox})))}}]),t}(s.a.Component),b=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).state={postRows:[],savedPosts:{},after:null,subreddit:"sneakers",loading:!1,errorMessage:""},e.handleScroll=e.handleScroll.bind(Object(u.a)(Object(u.a)(e))),e.handleFilterTextInput=e.handleFilterTextInput.bind(Object(u.a)(Object(u.a)(e))),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleScroll",value:function(e){if(0!=this.state.postRows.length){if(window.innerHeight+window.scrollY+100>=document.documentElement.scrollHeight){var t=this.state.postRows.length;this.fetchPosts(t,"bottom")}if(0===window.scrollY){t=this.state.postRows.length;this.fetchPosts(t,"top")}if(window.innerWidth+window.scrollX+100>=document.documentElement.scrollWidth){t=this.state.postRows[0].length;this.fetchPosts(t,"right")}if(window.scrollX<.2*window.innerWidth){t=this.state.postRows[0].length;this.fetchPosts(t,"left")}}}},{key:"generateObject",value:function(e){if(null==e.data.preview||null==e.data.preview.images)return null;var t={};return t.Id=e.data.id,t.Image=e.data.preview.images[0].resolutions[e.data.preview.images[0].resolutions.length-1].url.replace(/&amp;/g,"&"),t.Author=e.data.author,t.Score=e.data.score,t.Link=e.data.permalink,t.Title=e.data.title,t.Comments=e.data.num_comments,t.Extlink=e.data.url,t}},{key:"fetchPosts",value:function(e,t){var a=this;if(!this.state.loading){this.state.loading=!0,console.log("FETCHING!");var n="https://www.reddit.com/r/"+this.state.subreddit+"/hot.json?limit="+3*e+"&after="+this.state.after;fetch(n).then(function(e){return e.json()}).then(function(n){if(null==n||null==n.data||0==n.data.children.length)return a.state.loading=!1,void a.setState({loading:!1,errorMessage:"Could not fetch images"});for(var s=n.data.children,o="",r=[],i=0;i<s.length;i++){var l=a.generateObject(s[i]);if(null!=l&&(r.push(l),o=s[i].data.name),r.length===e)break}if(r.length>e)a.setState({loading:!1,errorMessage:"Could not find anymore images"});else{var c=a.state.postRows.slice();switch(t){case"top":for(i=0;i<c.length;i++)c[i].unshift(r[i]);a.setState({after:o,postRows:c,loading:!1,errorMessage:""}),window.scrollTo(window.scrollX,window.innerHeight),console.log("done fetching top");break;case"bottom":for(i=0;i<c.length;i++)c[i].push(r[i]);a.setState({after:o,postRows:c,loading:!1,errorMessage:""}),console.log("done fetching bottom");break;case"left":c.unshift(r),a.setState({after:o,postRows:c,loading:!1,errorMessage:""}),window.scrollTo(.8*window.innerWidth,window.scrollY),console.log("done fetching left");break;case"right":c.push(r),a.setState({after:o,postRows:c,loading:!1,errorMessage:""}),console.log("done fetching right");break;case"center":var h=a.generateInitialArray(r);a.setState({after:o,postRows:h,loading:!1,errorMessage:""}),window.scrollTo(.8*window.innerWidth,window.innerHeight),console.log("done fetching center");break;default:throw a.state.loading=!1,"CASE NOT RECOGNIZED"}}}).catch(function(e){console.log("Error: ",e),a.setState({loading:!1,errorMessage:"Could not find subreddit"})})}}},{key:"generateInitialArray",value:function(e){for(var t=[],a=Math.sqrt(e.length),n=0;n<e.length;n++)null==t[n%a]?t[n%a]=[e[n]]:t[n%a].push(e[n]);return t}},{key:"renderPost",value:function(e){var t=this;return s.a.createElement(w,{key:e.Id,id:e.Id,image:e.Image,title:e.Title,onPostClick:function(){return t.handlePostClick(e)}})}},{key:"renderPostList",value:function(e){var t=this;return s.a.createElement("div",{className:"row"},e.map(function(e){return t.renderPost(e)}))}},{key:"renderFavorites",value:function(e){var t=this;return s.a.createElement("li",null,s.a.createElement(v,{key:e.Id,id:e.Id,image:e.Image,title:e.Title,author:e.Author,score:e.Score,link:e.Link,comments:e.Comments,extlink:e.Extlink,onPostClick:function(){return t.handlePostClick(e)}}))}},{key:"handlePostClick",value:function(e){var t=this.state.savedPosts;e.Id in t?delete t[e.Id]:t[e.Id]=e,this.setState({savedPosts:t})}},{key:"handleFilterTextInput",value:function(e){if(e.trim()&&e.trim()!=this.state.subreddit){var t=this.state.postRows.splice();t.length=0,this.setState({postRows:t,after:null,subreddit:e},function(){this.fetchPosts(9,"center")})}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"container"},s.a.createElement("div",{id:"postOverview"},s.a.createElement(p,{onFilterTextInput:this.handleFilterTextInput}),s.a.createElement(f,{message:this.state.errorMessage}),s.a.createElement(k,null),s.a.createElement("ul",null,Object.keys(this.state.savedPosts).map(function(t){return e.renderFavorites(e.state.savedPosts[t])}))),s.a.createElement("div",{id:"mainPost"},this.state.postRows.map(function(t){return e.renderPostList(t)})))}},{key:"componentDidMount",value:function(){document.title="ReddiMage - by adae";this.fetchPosts(9,"center");window.addEventListener("scroll",this.handleScroll)}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,2,1]]]);
//# sourceMappingURL=main.c81382d8.chunk.js.map